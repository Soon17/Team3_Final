<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout.html}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>결제</title>
	<style>
		.main-container {
			background-color: #f5f6f7;
			font-family: 'Noto Sans KR', sans-serif;
		}

		.container-box {
			background-color: #fff;
			padding: 30px;
			border-radius: 10px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
		}

		h5 {
			font-weight: bold;
		}

		.row {
			max-width: 1032px;
			display: flex;
			justify-content: center;
			flex-wrap: nowrap;
			margin-top: 30px;
		}

		.in {
			margin-top: 50px;
			margin-bottom: 10px;
		}

		.option-label {
			color: #333;
			font-size: 15px;
			font-weight: 400;
			margin-left: 6px;
			cursor: pointer;
			user-select: none;
		}

		.form-check {
			display: flex;
			align-items: center;
		}

		.form-check-input {
			width: 16px;
			height: 16px;
			margin-top: 0;
			margin-right: 0;
			transform: translateY(-4px);
			/*체크박스 위치조절*/
			cursor: pointer;
		}

		.form-check-input:checked+.option-label {
			color: #007BFF;
			font-weight: 500;
		}
	</style>
</head>

<body>
	<main layout:fragment="content" class="main-container">
		<div class="container mb-5">
			<div class="row">
				<div class="col-md-7 container-box mr-3">
					<form>
						<small class="text-muted">4성급</small>
						<h5 class="d-flex justify-content-between align-items-center border-bottom pb-3 mt-1 mb-2"
							style="font-size: 20px">좋아요~호텔</h5>
						<div class="d-flex justify-content-center align-items-center border-bottom pb-2" style="gap: 32px;">
							<div class="text-center mx-5">
								<small class="text-muted">체크인</small>
								<div style="font-weight: bold;">5/8/목</div>
								<div style="font-size: 0.9rem;">15:00 ~</div>
							</div>
							<div class="text-center mx-5">
								<span class="badge badge-light">1박</span>
							</div>
							<div class="text-center mx-5">
								<small class="text-muted">체크아웃</small>
								<div style="font-weight: bold;">5/9/금</div>
								<div style="font-size: 0.9rem;">11:00 까지</div>
							</div>
						</div>
						<div class="d-flex align-items-center border-bottom py-3">
							<div style="font-weight: bold; margin-right: 100px;">객실정보</div>
							<div>Deluxe Double City</div>
						</div>
						<div class="d-flex align-items-center pt-3">
							<div style="font-weight: bold; margin-right: 128px;">인원</div>
							<div>성인2명</div>
						</div>
					</form>
					<form>
						<h5 class="in">예약자 정보</h5>
						<div class="form-group">
							<label>이름</label>
							<input type="text" class="form-control" placeholder="성명">
						</div>
						<div class="form-group">
							<label>휴대폰 번호</label>
							<input type="text" class="form-control" placeholder="예: 010-1234-5678">
						</div>
						<div class="text-right mt-2">
							<button type="button" class="btn btn-outline-secondary btn-sm mt-2 py-1">인증번호받기</button>
						</div>
					</form>
					<form>
						<h5 class="in">숙박자 정보</h5>
						<div class="form-check my-3">
							<input class="form-check-input" type="checkbox" id="sameInfo" checked>
							<label class="option-label" for="sameInfo">숙박자와 예약자 정보가 같습니다</label>
						</div>
						<div class="form-group">
							<label>이름</label>
							<input type="text" class="form-control" placeholder="성명">
						</div>
						<div class="form-group">
							<label>휴대폰 번호</label>
							<input type="text" class="form-control" placeholder="예: 010-1234-5678" style="flex: 1;">
						</div>
					</form>
					<form>
						<h5 class="mt-5 mb-3">호텔 요청사항</h5>
						<div class="d-flex flex-wrap">
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt1">
								<label class="option-label" for="opt1">옵션 1</label>
							</div>
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt2">
								<label class="option-label" for="opt2">옵션 2</label>
							</div>
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt3">
								<label class="option-label" for="opt3">옵션 3</label>
							</div>
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt4">
								<label class="option-label" for="opt4">옵션 4</label>
							</div>
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt5">
								<label class="option-label" for="opt5">옵션 5</label>
							</div>
							<div class="form-check mb-2" style="width: 50%;">
								<input class="form-check-input" type="checkbox" id="opt6">
								<label class="option-label" for="opt6">옵션 6</label>
							</div>
						</div>
					</form>
					<form>
						<div class="mt-5">
							<h5 class="mb-4">객실 정보 안내</h5>
							<div class="d-flex border rounded p-3 mb-4" style="background-color: #fafafa;">
								<div class="w-50 text-center border-right">
									<div class="text-muted mb-1">체크인</div>
									<div style="font-weight: 500; color: #4564b8d2;">15:00 ~ 23:30</div>
								</div>
								<div class="w-50 text-center">
									<div class="text-muted mb-1">체크아웃</div>
									<div style="font-weight: 500; color: #4564b8d2;">11:00 까지</div>
								</div>
							</div>
							<div class="mb-3">
								<strong>주요 안내사항</strong>
								<div class="mt-2 text-muted" style="
									font-size: 0.95rem;
									line-height: 1.5;
									white-space: pre-line;
									word-break: keep-all;
								">이곳은 DB에서 가져온 안내사항 문자열이 들어갈 자리입니다.
									• 추가 인원에 대한 요금이 부과될 수 있으며..
									• 체크인 시 신분증과 보증금이 필요할 수 있습니다.
								</div>
							</div>
						</div>
					</form>
					<form>
						<h5 class="mb-4 mt-5">결제 정보</h5>
						<!-- 총 상품금액 -->
						<div class="d-flex justify-content-between mb-2" style="cursor: pointer;" onclick="toggleDetailAll()">
							<div class="text-muted">총 상품금액</div>
							<div class="d-flex align-items-center" style="gap: 4px;">
								<div style="font-weight: bold;">66,000원</div>
								<img class="arrowImg" src="/imgs/small-up.png" width="16" height="16" />
							</div>
						</div>
						<!-- 호텔 숙박 요금 -->
						<div class="priceDetail" style="display: none; font-size: 13px;">
							<div class="d-flex justify-content-between bg-light p-2 rounded mb-1">
								<div class="text-muted">1박 숙박 요금</div>
								<div class="text-muted">33,000원</div>
							</div>
						</div>
						<hr>
						<!-- 총 결제금액 -->
						<div class="d-flex justify-content-between mt-3">
							<strong>총 결제금액</strong>
							<strong>66,000원</strong>
						</div>
					</form>
				</div>
				<div class="col-md-5" id="payment-summary-container" style="position: relative; overflow: visible;">
					<!-- Ajax로 불러온 내용이 여기에 들어옴 -->
				</div>
			</div>
		</div>
		<script>
			let detailVisible = true;

			function toggleDetailAll() {
				const $details = $(".priceDetail");
				const $arrows = $(".arrowImg");

				detailVisible = !detailVisible;

				if (detailVisible) {
					$details.stop(true, true).slideDown(200);
					$arrows.attr("src", "/imgs/small-up.png");
				} else {
					$details.stop(true, true).slideUp(200);
					$arrows.attr("src", "/imgs/small-down.png");
				}
			};

			$(document).ready(function () {
				$(".priceDetail").hide();
				$(".arrowImg").attr("src", "/imgs/small-down.png");

				$.ajax({
					url: '/pay/summary',
					type: 'GET',
					success: function (data) {
						$('#payment-summary-container').html(data);
						$(".priceDetail").slideDown(0);
						$(".arrowImg").attr("src", "/imgs/small-up.png");
					},
					error: function (xhr) {
						console.error("요청 실패", xhr);
					}
				});
			});
		</script>
	</main>
</body>

</html>