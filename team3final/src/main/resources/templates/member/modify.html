<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout.html}">

<head>
	<meta charset="UTF-8">
	<title>내 정보 관리</title>
	<style>
		.modify-header {
			text-align: center;
			margin-top: 10px;
			font-size: 18px;
			font-weight: bold;
		}

		.user-profile {
			text-align: center;
			margin: 30px 0;
		}

		.user-profile h2 {
			margin: 5px 0;
		}

		.user-profile p {
			color: #777;
			font-size: 14px;
		}

		.info-box {
			border-top: 1px solid #eee;
			padding: 10px 0;
		}

		.info-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 15px 0;
			border-bottom: 1px solid #eee;
			cursor: pointer;
		}

		.label {
			color: #555;
		}

		.value {
			display: flex;
			color: #222;
		}

		.badge {
			background-color: #f0f0f0;
			border-radius: 4px;
			padding: 2px 6px;
			font-size: 12px;
			margin-right: 5px;
		}

		.badge.success {
			background-color: #d4eaf6;
			color: #0b85c4;
		}

		.badge.warning {
			background-color: #ffe1b9;
			color: #d48806;
		}

		.section-title {
			margin: 30px 0 10px;
			font-weight: bold;
		}

		.linked-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 12px 0;
			border-bottom: 1px solid #eee;
		}

		.linked-item span {
			display: flex;
			align-items: center;
		}

		.linked-item img {
			width: 20px;
			height: 20px;
			margin-right: 8px;
		}

		.button {
			background-color: #222;
			color: white;
			padding: 6px 12px;
			border: none;
			border-radius: 4px;
			font-size: 13px;
			cursor: pointer;
		}

		.footer-links {
			display: flex;
			justify-content: center;
			gap: 20px;
			margin: 30px 0 10px;
			font-size: 14px;
			color: #888;
		}

		.footer-links a {
			text-decoration: none;
			color: #888;
		}

		.modal-custom {
			color: rgb(100, 100, 100);
			font-size: 12px;
		}

		.input-box {
			width: 100%;
		}

		.gender-group {
			display: flex;
			margin: 20px 0;
		}

		.gender-group input[type="radio"] {
			display: none;
		}

		.gender-group label {
			flex: 1;
			text-align: center;
			padding: 12px 0;
			margin: 0 5px;
			border: 1px solid #ccc;
			border-radius: 6px;
			cursor: pointer;
			background-color: #f5f5f5;
			font-size: 15px;
		}

		.gender-group input[type="radio"]:checked+label {
			background-color: #007bff;
			color: #fff;
			font-weight: bold;
			border-color: #007bff;
		}

		.birth-selects {
			display: flex;
			justify-content: space-between;
			gap: 5px;
		}

		.birth-select {
			flex: 1;
			padding: 8px;
			font-size: 14px;
		}
	</style>
</head>

<body>
	<main layout:fragment="content">
		<div class="container">
			<div class="modify-header">내정보</div>

			<div class="user-profile">
				<h2 th:text="${user.me_nick}">학교가는자존심</h2>
				<p th:text="${user.me_email}">acejsh77@gmail.com</p>
			</div>

			<div class="info-box">
				<div class="info-item info-another" data-toggle="modal" data-target="#emailModal">
					<div>
						<span class="label">이메일 계정</span>
						<span class="badge success">인증완료</span>
					</div>
					<span class="value">
						<span id="myEmail" th:text="${user.me_email}">acejsh77@gmail.com</span>
						<div class="dimmed mx-3">&gt;</div>
					</span>
				</div>

				<div class="info-item info-another" data-toggle="modal" data-target="#numModal">
					<div>
						<span class="label">휴대폰 번호</span>
						<span class="badge warning">미인증</span>
					</div>
					<span class="value">
						<span id="myNum" th:text="${user.me_number}">010-1111-1111</span>
						<div class="dimmed mx-3">&gt;</div>
					</span>
				</div>
				<div class="info-item info-another" data-toggle="modal" data-target="#nickModal">
					<span class="label">닉네임</span>
					<span class="value">
						<span id="myNick" th:text="${user.me_nick}">학교가는자존심</span>
						<div class="dimmed mx-3">&gt;</div>
					</span>
				</div>
				<div class="info-item info-birthAndGender" data-toggle="modal" data-target="#birthAndGenderModal">
					<span class="label">생년월일</span>
					<span class="value">
						<span id="myYear">2000</span>.
						<span id="myMonth">5</span>.
						<span id="myDay">13</span>
						<div class="dimmed mx-3">&gt;</div>
					</span>
				</div>
				<div class="info-item info-birthAndGender" data-toggle="modal" data-target="#birthAndGenderModal">
					<span class="label">성별</span>
					<span class="value">
						<span id="myGender" th:text="${user.me_gender}">남자</span>
						<div class="dimmed mx-3">&gt;</div>
					</span>
				</div>
			</div>

			<!------------------------------ Modal ------------------------------>

			<!-- 이메일 Modal -->
			<div class="modal" id="emailModal">
				<div class="modal-dialog modal-custom">
					<div class="modal-content">
						<!-- Modal 헤더 -->
						<div class="modal-header">
							<h4 class="modal-title">내 정보 수정</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>
						<!-- Modal 바디 -->
						<div class="modal-body">
							10초 이메일 연결 시 예약 확인에 꼭 필요한 바우처부터 회원 전용 소식까지 모두 받아보실 수 있습니다.
							<input type="email" class="input-box mt-3" id="input-email">
						</div>
						<!-- Modal 푸터 -->
						<div class="modal-footer justify-content-center">
							<button type="button" class="btn btn-danger btn-email" data-dismiss="modal">이메일 인증</button>
						</div>
					</div>
				</div>
			</div>

			<!-- 폰번호 Modal -->
			<div class="modal" id="numModal">
				<div class="modal-dialog modal-custom">
					<div class="modal-content">
						<!-- Modal 헤더 -->
						<div class="modal-header">
							<h4 class="modal-title">내 정보 수정</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>
						<!-- Modal 바디 -->
						<div class="modal-body">
							10초 인증 시 호텔고 이용과 상담 진행이 더욱 원활해집니다.
							<input type="tel" class="input-box mt-3" id="input-num" placeholder="휴대폰 번호">
						</div>
						<!-- Modal 푸터 -->
						<div class="modal-footer justify-content-center">
							<button type="button" class="btn btn-danger btn-num" data-dismiss="modal">인증번호 받기</button>
						</div>
					</div>
				</div>
			</div>

			<!-- 닉네임 Modal -->
			<div class="modal" id="nickModal">
				<div class="modal-dialog modal-custom">
					<div class="modal-content">
						<!-- Modal 헤더 -->
						<div class="modal-header">
							<h4 class="modal-title">내 정보 수정</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>
						<!-- Modal 바디 -->
						<div class="modal-body">
							나만의 닉네임으로 자신을 표현해보세요. (일부 특수문자, 이모지 사용은 불가능합니다)
							<input type="text" class="input-box mt-3" id="input-nick">
						</div>
						<!-- Modal 푸터 -->
						<div class="modal-footer justify-content-center">
							<button type="button" class="btn btn-danger btn-nick" data-dismiss="modal">설정 완료</button>
						</div>
					</div>
				</div>
			</div>

			<!-- 생일/성별 Modal -->
			<div class="modal" id="birthAndGenderModal">
				<div class="modal-dialog modal-custom">
					<div class="modal-content">
						<!-- Modal 헤더 -->
						<div class="modal-header">
							<h4 class="modal-title">내 정보 수정</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>
						<!-- Modal 바디 -->
						<div class="modal-body">
							생년월일을 입력하셔야 렌트가 가능함을 안내해드립니다.<br>
							입력한 나이가 정보와 맞지 않을 경우 현장에서 배차가 불가능할 수 있으니 정확하게 입력해주세요.
							<div class="gender-group">
								<input type="radio" id="male" name="gender" value="남자">
								<label for="male">남자</label>
								<input type="radio" id="female" name="gender" value="여자" checked>
								<label for="female">여자</label>
							</div>
							<div class="birth-selects">
								<select id="select-year" class="col-6 birth-select">
									<!-- 스크립트로 생성 -->
								</select>
								<select id="select-month" class="col-3 birth-select">
									<option value="1">1</option>
									<option value="2">2</option>
									<option value="3">3</option>
									<option value="4">4</option>
									<option value="5">5</option>
									<option value="6">6</option>
									<option value="7">7</option>
									<option value="8">8</option>
									<option value="9">9</option>
									<option value="10">10</option>
									<option value="11">11</option>
									<option value="12">12</option>
								</select>
								<select id="select-day" class="col-3 birth-select">
									<!-- 스크립트로 생성 -->
								</select>
							</div>
						</div>
						<!-- Modal 푸터 -->
						<div class="modal-footer justify-content-center">
							<button type="button" class="btn btn-danger btn-birthAndGender" data-dismiss="modal">설정 완료</button>
						</div>
					</div>
				</div>
			</div>

			<!------------------------------------------------------------------->

			<div class="section-title">계정연동</div>
			<div class="info-box">
				<div class="linked-item">
					<span><img src="/resources/static/img/kakaotalk.png" alt="kakaotalk">카카오톡</span>
					<span style="color: #0b85c4;">연동중</span>
				</div>
				<div class="linked-item">
					<span><img src="/resources/static/img/apple.png" alt="apple">Apple</span>
					<button class="button">연동하기</button>
				</div>
				<div class="linked-item">
					<span><img src="/resources/static/img/naver.png" alt="naver">네이버</span>
					<button class="button">연동하기</button>
				</div>
			</div>

			<div class="footer-links">
				<a href="/logout">로그아웃</a>
				<a href="#">회원탈퇴</a>
			</div>
		</div>

		<script>
			/**************************************************/

			// 임의의 정보 아이템 요소를 클릭 시 동작
			$(".info-another").click(function () {
				const modal = $(this).data("target");				//해당 요소와 연결된 모달
				const val = $(this).find(".value>span").text();		//해당 요소의 텍스트 값
				$(modal).find("input").val(val);					//모달의 input태그에 넣기
			})

			// 생일/성별 정보 아이템 요소를 클릭 시 동작
			$(".info-birthAndGender").click(function () {
				const gender = $("#myGender").text();
				const year = $("#myYear").text();
				const month = $("#myMonth").text();
				const day = $("#myDay").text();

				if (gender === "남자") $('#male').prop('checked', true);
				if (gender === "여자") $('#female').prop('checked', true);

				$('#select-year option[value="' + year + '"]').prop('selected', true);
				$('#select-month option[value="' + month + '"]').prop('selected', true);
				$('#select-day option[value="' + day + '"]').prop('selected', true);
			})

			/**************************************************/

			// 이메일 - 수정 버튼 클릭 시 동작
			$('.btn-email').click(function () {
				const emailInput = $("#input-email").val().trim();
				if (emailInput) {
					$('#myEmail').text(emailInput);
					$('#emailModal').modal('hide');
				} else {
					alert('이메일을 입력해주세요.');
				}
			});

			// 번호 - 수정 버튼 클릭 시 동작
			$('.btn-num').click(function () {
				const numInput = $("#input-num").val().trim();
				if (numInput) {
					$('#myNum').text(numInput);
					$('#numModal').modal('hide');
				} else {
					alert('번호를 입력해주세요.');
				}
			});

			// 닉네임 - 수정 버튼 클릭 시 동작
			$('.btn-nick').click(function () {
				const nickInput = $("#input-nick").val().trim();
				if (nickInput) {
					$('#myNick').text(nickInput);
					$('#nickModal').modal('hide');
				} else {
					alert('닉네임을 입력해주세요.');
				}
			});

			// 생일/성별 - 수정 버튼 클릭 시 동작
			$('.btn-birthAndGender').click(function () {
				const checkedGender = $('[name=gender]:checked').val();
				const selectedYear = $('#select-year option:selected').val();
				const selectedMonth = $('#select-month option:selected').val();
				const selectedDay = $('#select-day option:selected').val();
				$("#myGender").text(checkedGender);
				$("#myYear").text(selectedYear);
				$("#myMonth").text(selectedMonth);
				$("#myDay").text(selectedDay);
			});

			// 연도 선택 생성(J쿼리 방식, 아래와 동일)
			const $yearSelect = $('#select-year');
			for (let y = 1900; y <= 2005; y++) {
				$yearSelect.append($('<option>', {
					value: y,
					text: y
				}));
			}

			// 일 선택 생성(document방식, 위와 동일)
			const daySelect = document.getElementById('select-day');
			for (let d = 1; d <= 31; d++) {
				const option = document.createElement('option');
				option.value = d;
				option.textContent = d;
				daySelect.appendChild(option);
			}
		</script>
	</main>
</body>

</html>